<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Vueæ•°æ®å“åº”å¼ - å¯å–œã®life</title><meta name="Description" content=""><meta property="og:title" content="Vueæ•°æ®å“åº”å¼" />
<meta property="og:description" content="1.å›é¡¾ getter&amp;setter ä½œç”¨ï¼šåœ¨å®šä¹‰å¯¹è±¡çš„æ—¶å€™å°±åœ¨å¯¹è±¡ä¸Šè®¾ç½®getterï¼Œsetteræ¥å¯¹ä¸€ä¸ªè™šæ‹Ÿå±æ€§è¿›è¡Œè¯»å†™ç”¨æ³•ï¼šgetï¼Œsetå…³é”®å­—getterï¼šä¸ç”¨" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://luuu4129955.github.io/posts/vue%E6%95%B0%E6%8D%AE%E5%93%8D%E5%BA%94%E5%BC%8F/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-10-08T15:31:25+08:00" />
<meta property="article:modified_time" content="2021-10-08T15:31:25+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Vueæ•°æ®å“åº”å¼"/>
<meta name="twitter:description" content="1.å›é¡¾ getter&amp;setter ä½œç”¨ï¼šåœ¨å®šä¹‰å¯¹è±¡çš„æ—¶å€™å°±åœ¨å¯¹è±¡ä¸Šè®¾ç½®getterï¼Œsetteræ¥å¯¹ä¸€ä¸ªè™šæ‹Ÿå±æ€§è¿›è¡Œè¯»å†™ç”¨æ³•ï¼šgetï¼Œsetå…³é”®å­—getterï¼šä¸ç”¨"/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://luuu4129955.github.io/posts/vue%E6%95%B0%E6%8D%AE%E5%93%8D%E5%BA%94%E5%BC%8F/" /><link rel="prev" href="https://luuu4129955.github.io/posts/ajax%E6%98%AF%E4%BB%80%E4%B9%88%E4%BB%A5%E5%8F%8A%E6%80%8E%E4%B9%88%E7%94%A8/" /><link rel="next" href="https://luuu4129955.github.io/posts/es6%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Vueæ•°æ®å“åº”å¼",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/luuu4129955.github.io\/posts\/vue%E6%95%B0%E6%8D%AE%E5%93%8D%E5%BA%94%E5%BC%8F\/"
        },"genre": "posts","wordcount":  2087 ,
        "url": "https:\/\/luuu4129955.github.io\/posts\/vue%E6%95%B0%E6%8D%AE%E5%93%8D%E5%BA%94%E5%BC%8F\/","datePublished": "2021-10-08T15:31:25+08:00","dateModified": "2021-10-08T15:31:25+08:00","publisher": {
            "@type": "Organization",
            "name": "å¯å–œ"},"author": {
                "@type": "Person",
                "name": "å¯å–œ"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="å¯å–œã®life">ğŸ˜‰å¯å–œã®life</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> æ–‡ç«  </a><a class="menu-item" href="/tags/"> æ ‡ç­¾ </a><a class="menu-item" href="/categories/"> åˆ†ç±» </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="å¯å–œã®life">ğŸ˜‰å¯å–œã®life</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">æ–‡ç« </a><a class="menu-item" href="/tags/" title="">æ ‡ç­¾</a><a class="menu-item" href="/categories/" title="">åˆ†ç±»</a><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Vueæ•°æ®å“åº”å¼</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>å¯å–œ</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-10-08">2021-10-08</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 2087 å­—&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 5 åˆ†é’Ÿ&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>ç›®å½•</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents"></nav></div>
            </div><div class="content" id="content"><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="1å›é¡¾-gettersetter">1.å›é¡¾ getter&amp;setter</h1>
<p>ä½œç”¨ï¼šåœ¨å®šä¹‰å¯¹è±¡çš„æ—¶å€™å°±åœ¨å¯¹è±¡ä¸Šè®¾ç½®<code>getter</code>ï¼Œ<code>setter</code>æ¥å¯¹ä¸€ä¸ªè™šæ‹Ÿå±æ€§è¿›è¡Œè¯»å†™<!-- raw HTML omitted -->ç”¨æ³•ï¼š<code>get</code>ï¼Œ<code>set</code>å…³é”®å­—<!-- raw HTML omitted -->getterï¼šä¸ç”¨åœ¨å‡½æ•°ååé¢åŠ ()å°±å¯ä»¥è°ƒç”¨å‡½æ•°<!-- raw HTML omitted -->setterï¼šè®©å¯¹è±¡çš„å±æ€§å¯ä»¥è¢«æ”¹å†™<!-- raw HTML omitted --><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">å§“</span><span class="o">:</span> <span class="s2">&#34;å‘¨&#34;</span><span class="p">,</span>
  <span class="nx">å</span><span class="o">:</span> <span class="s2">&#34;æ°ä¼¦&#34;</span><span class="p">,</span>
  <span class="nx">get</span> <span class="nx">å§“å</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">å§“</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">å</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">set</span> <span class="nx">å§“å</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">å§“</span> <span class="o">=</span> <span class="nx">str</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">å</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="p">},</span>
<span class="p">};</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">å§“å</span><span class="p">);</span> <span class="c1">//getï¼Œ outputï¼šå‘¨æ°ä¼¦
</span><span class="c1"></span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">å§“å</span> <span class="o">=</span> <span class="s2">&#34;ç‹åŠ›å®&#34;</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`å§“ </span><span class="si">${</span><span class="nx">obj</span><span class="p">.</span><span class="nx">å§“</span><span class="si">}</span><span class="sb">ï¼Œå </span><span class="si">${</span><span class="nx">obj</span><span class="p">.</span><span class="nx">å</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span> <span class="c1">//getï¼Œ outputï¼šå§“ ç‹ï¼Œå åŠ›å®
</span></code></pre></div><p>è¿˜å¯ä»¥åœ¨</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">set</span><span class="p">(){</span>
	<span class="nx">å¯¹å‚æ•°xåšä¸‹åˆ¤æ–­</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">å§“</span><span class="o">:</span> <span class="s2">&#34;å‘¨&#34;</span><span class="p">,</span>
  <span class="nx">å</span><span class="o">:</span> <span class="s2">&#34;æ°ä¼¦&#34;</span><span class="p">,</span>
  <span class="nx">get</span> <span class="nx">å§“å</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">å§“</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">å</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">set</span> <span class="nx">å§“å</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">str</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`å§“åä¸èƒ½è¶…è¿‡4ä¸ªå­—ç¬¦!`</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`å§“åä¿®æ”¹æˆåŠŸ`</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">å§“</span> <span class="o">=</span> <span class="nx">str</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">å</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>
<span class="p">};</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">å§“å</span><span class="p">);</span> <span class="c1">//get,output:å‘¨æ°ä¼¦
</span><span class="c1"></span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">å§“å</span> <span class="o">=</span> <span class="s2">&#34;é’®é’´ç¦„Â·ç”„å¬›&#34;</span><span class="p">;</span> <span class="c1">//è§¦å‘äº†set,output:å§“åä¸èƒ½è¶…è¿‡4ä¸ªå­—ç¬¦!
</span><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`å§“ </span><span class="si">${</span><span class="nx">obj</span><span class="p">.</span><span class="nx">å§“</span><span class="si">}</span><span class="sb">ï¼Œå </span><span class="si">${</span><span class="nx">obj</span><span class="p">.</span><span class="nx">å</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span> <span class="c1">//set,output:å§“ å‘¨ï¼Œå æ°ä¼¦
</span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="2å›é¡¾-es6-çš„-objectdefineproperty">2.å›é¡¾ ES6 çš„ Object.defineProperty</h1>
<p>ä½œç”¨ï¼šå®šä¹‰ä¸€ä¸ªå¯¹è±¡ä¹‹åï¼Œå†é¢å¤–æ·»åŠ <code>getter/setter</code>ï¼Œæˆ–è€…å±æ€§çš„<code>value</code>ã€‚<!-- raw HTML omitted -->MDN å®šä¹‰ï¼šä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œå¹¶è¿”å›æ­¤å¯¹è±¡ã€‚<!-- raw HTML omitted -->æ³¨æ„ï¼š</p>
<ul>
<li>åº”å½“ç›´æ¥åœ¨ <code>Object</code>æ„é€ å™¨å¯¹è±¡ä¸Šè°ƒç”¨æ­¤æ–¹æ³•ï¼Œè€Œä¸æ˜¯åœ¨ä»»æ„ä¸€ä¸ª Object ç±»å‹çš„å®ä¾‹ä¸Šè°ƒç”¨ã€‚</li>
<li>æ•°æ®æè¿°ç¬¦å’Œå­˜å–æè¿°ç¬¦ä¸èƒ½æ··åˆä½¿ç”¨ï¼ˆå³ä¸èƒ½åŒæ—¶ç»™å±æ€§èµ‹å€¼å’Œæ·»åŠ  getter/setter æ–¹æ³•ï¼‰</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">let</span> <span class="nx">value</span> <span class="o">=</span> <span class="s2">&#34;å‘¨&#34;</span><span class="p">;</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="s2">&#34;å§“&#34;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">get</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;è®¿é—®objçš„å§“ï¼&#34;</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">set</span><span class="p">(</span><span class="nx">newValue</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;æ”¹å˜objçš„å§“&#34;</span><span class="p">);</span>
    <span class="nx">value</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span>
  <span class="p">},</span>
<span class="p">});</span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">å§“</span><span class="p">;</span> <span class="c1">//output:è®¿é—®objçš„å§“ï¼&#34;å‘¨&#34;
</span><span class="c1"></span><span class="nx">obj</span><span class="p">.</span><span class="nx">å§“</span> <span class="o">=</span> <span class="s2">&#34;é‡‘&#34;</span><span class="p">;</span> <span class="c1">//output:æ”¹å˜objçš„å§“ &#34;é‡‘&#34;
</span><span class="c1"></span><span class="nx">obj</span><span class="p">.</span><span class="nx">å§“</span><span class="p">;</span> <span class="c1">//output:è®¿é—®objçš„å§“ï¼&#34;é‡‘&#34;
</span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="3ä»£ç†æ¨¡å¼proxy-pattern">3.ä»£ç†æ¨¡å¼ï¼ˆProxy patternï¼‰</h1>
<p>é¡¾åæ€ä¹‰ï¼Œä»£ç†æ¨¡å¼æ˜¯ä¸€ç§<strong>è®¾è®¡æ¨¡å¼</strong>ã€‚<!-- raw HTML omitted -->ä»£ç†å¯¹è±¡å¯ä»¥åœ¨å®¢æˆ·ç«¯å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´èµ·åˆ°<strong>ä¸­ä»‹</strong>çš„ä½œç”¨ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ä»£ç†å¯¹è±¡å»æ‰å®¢æˆ·ä¸èƒ½çœ‹åˆ°çš„å†…å®¹å’ŒæœåŠ¡æˆ–è€…æ·»åŠ å®¢æˆ·éœ€è¦çš„é¢å¤–æœåŠ¡ã€‚<!-- raw HTML omitted -->ç›®çš„ï¼š<strong>å¼•å…¥ä»£ç†å¯¹è±¡æ¥é—´æ¥è®¿é—®ä¸€ä¸ªå¯¹è±¡</strong>ï¼Œä»¥é˜²ç”¨æˆ·ç›´æ¥ä½¿ç”¨æˆ–ç¯¡æ”¹<code>data</code> é‡Œçš„æ•°æ®ã€‚
<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="4vue-çš„æ•°æ®å“åº”">4.Vue çš„æ•°æ®å“åº”</h1>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">myData</span> <span class="p">});</span>
</code></pre></div><p>Vue å¦‚ä½•å®ç°æ•°æ®å“åº”ï¼Ÿ<!-- raw HTML omitted -->â€”â€”å³æ•°æ®ä¸€æ—¦å˜åŒ–ï¼Œé¡µé¢æ•°æ®ç«‹å³å˜åŒ–ã€‚æ— éœ€é¢‘ç¹æ“ä½œ DOMã€‚<!-- raw HTML omitted --><strong>å…·ä½“æ€æƒ³ï¼š</strong></p>
<ol>
<li>è®©<code>Vue</code>çš„å®ä¾‹<code>vm</code>æˆä¸º<code>myData</code>çš„ä»£ç†å¯¹è±¡</li>
<li><code>vm</code>ä¼šå¯¹<code>myData</code>çš„æ‰€æœ‰å±æ€§è¿›è¡Œç›‘å¬</li>
<li>ä¸€æ—¦å±æ€§å˜åŒ–ï¼Œ<code>vm</code>å°±è°ƒç”¨<code>render(data)</code>æ›´æ–°è§†å›¾å±‚</li>
</ol>
<p><!-- raw HTML omitted --><strong>Vue2</strong>é€šè¿‡<code>Object.defineProperty</code>å¯¹<code>data</code>çš„æ•°æ®ä½¿ç”¨<code>getter</code>å’Œ<code>setter</code>æ”¹é€ ï¼Œæ¥å®ç°æ•°æ®å“åº”<!-- raw HTML omitted -->é¦–å…ˆä½¿ç”¨<strong>ä»£ç†æ€æƒ³</strong>ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">data3</span> <span class="o">=</span> <span class="nx">proxy</span><span class="p">({</span> <span class="nx">data</span><span class="o">:</span> <span class="p">{</span> <span class="nx">n</span><span class="o">:</span> <span class="mi">0</span> <span class="p">}</span> <span class="p">});</span> <span class="c1">// æ‹¬å·é‡Œæ˜¯åŒ¿åå¯¹è±¡ï¼Œæ— æ³•è®¿é—®
</span><span class="c1"></span>
<span class="kd">function</span> <span class="nx">proxy</span><span class="p">({</span> <span class="nx">data</span> <span class="p">}</span> <span class="cm">/* è§£æ„èµ‹å€¼ */</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="c1">// è¿™é‡Œçš„ &#39;n&#39; å†™æ­»äº†ï¼Œç†è®ºä¸Šåº”è¯¥éå† data çš„æ‰€æœ‰ keyï¼Œè¿™é‡Œåšäº†ç®€åŒ–
</span><span class="c1"></span>  <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="s2">&#34;n&#34;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">n</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">n</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">},</span>
  <span class="p">});</span>
  <span class="k">return</span> <span class="nx">obj</span><span class="p">;</span> <span class="c1">// obj å°±æ˜¯ä»£ç†
</span><span class="c1"></span><span class="p">}</span>

<span class="c1">// data3 å°±æ˜¯ obj
</span><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`éœ€æ±‚ä¸‰ï¼š</span><span class="si">${</span><span class="nx">data3</span><span class="p">.</span><span class="nx">n</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="nx">data3</span><span class="p">.</span><span class="nx">n</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`éœ€æ±‚ä¸‰ï¼š</span><span class="si">${</span><span class="nx">data3</span><span class="p">.</span><span class="nx">n</span><span class="si">}</span><span class="sb">ï¼Œè®¾ç½®ä¸º -1 å¤±è´¥`</span><span class="p">);</span>
<span class="nx">data3</span><span class="p">.</span><span class="nx">n</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`éœ€æ±‚ä¸‰ï¼š</span><span class="si">${</span><span class="nx">data3</span><span class="p">.</span><span class="nx">n</span><span class="si">}</span><span class="sb">ï¼Œè®¾ç½®ä¸º 1 æˆåŠŸ`</span><span class="p">);</span>
</code></pre></div><p>ä½†æ˜¯ç”¨æˆ·è¿˜æ˜¯å¯ä»¥ä¿®æ”¹<code>data</code>ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">myData</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">n</span><span class="o">:</span> <span class="mi">0</span> <span class="p">};</span>
<span class="kd">let</span> <span class="nx">data4</span> <span class="o">=</span> <span class="nx">proxy</span><span class="p">({</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">myData</span> <span class="p">});</span>
</code></pre></div><p>è¦æƒ³å®ç°ï¼Œå°±ç®—ç”¨æˆ·ä¿®æ”¹<code>data</code>è¿˜æ˜¯è¦ç»è¿‡ä»£ç†ï¼Œå°±è¦ä½¿ç”¨<strong>æ•°æ®ç›‘å¬</strong>ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">myData5</span> <span class="o">=</span> <span class="p">{</span><span class="nx">n</span><span class="o">:</span><span class="mi">0</span><span class="p">}</span>
<span class="kd">let</span> <span class="nx">data5</span> <span class="o">=</span> <span class="nx">proxy2</span><span class="p">({</span> <span class="nx">data</span><span class="o">:</span><span class="nx">myData5</span> <span class="p">})</span> <span class="c1">// æ‹¬å·é‡Œæ˜¯åŒ¿åå¯¹è±¡ï¼Œæ— æ³•è®¿é—®
</span><span class="c1"></span>
<span class="kd">function</span> <span class="nx">proxy2</span><span class="p">({</span><span class="nx">data</span><span class="p">}</span><span class="cm">/* è§£æ„èµ‹å€¼ */</span><span class="p">){</span>
  <span class="c1">// è¿™é‡Œçš„ &#39;n&#39; å†™æ­»äº†ï¼Œç†è®ºä¸Šåº”è¯¥éå† data çš„æ‰€æœ‰ keyï¼Œè¿™é‡Œåšäº†ç®€åŒ–
</span><span class="c1"></span>  <span class="kd">let</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">n</span> <span class="c1">//åŠ ä¸Šè¿™å¥ï¼Œç”¨valueè®°ä¸‹myData5é‡Œçš„nï¼ˆå³æ•°æ®ç›‘å¬ï¼‰
</span><span class="c1"></span>  <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="p">{</span><span class="c1">//ä¸€æ—¦å¯¹nè¿›è¡Œgetterï¼Œsetterã€‚åŸæ¥çš„nå°±æ²¡äº†ï¼Œè¿”å›value
</span><span class="c1"></span>    <span class="nx">get</span><span class="p">(){</span>
      <span class="k">return</span> <span class="nx">value</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">newValue</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span><span class="k">return</span>
      <span class="nx">value</span> <span class="o">=</span> <span class="nx">newValue</span>
    <span class="p">}</span>
  <span class="p">})</span>
</code></pre></div><p>è¿™æ ·çš„è¯ï¼Œç”¨æˆ·ä¿®æ”¹<code>data</code>ï¼Œå¿…é¡»ç»è¿‡ä»£ç†ã€‚<!-- raw HTML omitted -->â€‹</p>
<p><strong>æ€»ç»“ï¼šVue å¯¹ data å°±æ˜¯åšäº†ä»¥ä¸Šä¸¤ä»¶äº‹ï¼šä½¿ç”¨ä»£ç†å¯¹è±¡ï¼Œå¯¹æ•°æ®è¿›è¡Œç›‘å¬</strong><!-- raw HTML omitted --><strong>â€‹</strong></p>
<p><strong>ç›‘å¬çš„ä½œç”¨ï¼šä¸€æ—¦æ•°æ®æ”¹å˜ï¼Œå°±ç«‹å³è¿›è¡Œè§†å›¾ä¸Šçš„æ›´æ–°</strong><!-- raw HTML omitted --><strong>â€‹</strong><!-- raw HTML omitted -->
<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="5objectdefineproperty-æœ‰-bug">5.Object.defineProperty æœ‰ bug</h1>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="s1">&#39;n&#39;</span><span class="p">,{...})</span>
</code></pre></div><p><code>Object.defineProperty</code>æ–¹æ³•å¿…é¡»è¦æœ‰ä¸€ä¸ª<code>n</code>ï¼Œæ‰èƒ½ä»£ç†&amp;ç›‘å¬ <code>obj.n</code><!-- raw HTML omitted -->å³<code>Vue</code>æ— æ³•ç›‘å¬ä¸€å¼€å§‹å°±ä¸å­˜åœ¨çš„<code>obj.n</code><!-- raw HTML omitted --><strong>è§£å†³ï¼š</strong></p>
<ol>
<li>æŠŠ key å£°æ˜å¥½ï¼Œåé¢å†åŠ  value</li>
<li>ä½¿ç”¨<code>vue.set</code>æˆ–<code>this.$set</code></li>
</ol>
<p><strong>ä½†æ˜¯ï¼šdata é‡Œé¢å¦‚æœæœ‰æ•°ç»„ï¼Œæ— æ³•æå‰å£°æ˜å¥½æ‰€æœ‰ key</strong><!-- raw HTML omitted --><strong>è§£å†³ï¼š</strong></p>
<ol>
<li>ä½¿ç”¨<code>vue.set</code>æˆ–<code>this.$set</code>ï¼ˆè¾ƒéº»çƒ¦ï¼‰</li>
<li>æ‰€ä»¥ä½¿ç”¨<code>array.push</code>ï¼ˆä¸è¿‡ä¸ JS ä¸åŒï¼‰
<blockquote>
<p>Vue çš„ Array ä¸ JS çš„ Array æœ‰å‡ ä¸ªåŒåçš„åŸå‹ï¼Œä½†å¤šäº†ä¸€ä¸ªä½œç”¨</p>
</blockquote>
</li>
</ol>
<p>â€‹</p>
<p>è¡¥å……ï¼šå¯å°è¯•ç»§ç»­æ·±å…¥ Vue reactivity åŸç†ï¼ˆVue3 çš„ proxyï¼‰ã€‚</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>æ›´æ–°äº 2021-10-08</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">è¿”å›</a></span>&nbsp;|&nbsp;<span><a href="/">ä¸»é¡µ</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/ajax%E6%98%AF%E4%BB%80%E4%B9%88%E4%BB%A5%E5%8F%8A%E6%80%8E%E4%B9%88%E7%94%A8/" class="prev" rel="prev" title="AJAXæ˜¯ä»€ä¹ˆä»¥åŠæ€ä¹ˆç”¨"><i class="fas fa-angle-left fa-fw"></i>AJAXæ˜¯ä»€ä¹ˆä»¥åŠæ€ä¹ˆç”¨</a>
            <a href="/posts/es6%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/" class="next" rel="next" title="ES6ä½¿ç”¨æ€»ç»“">ES6ä½¿ç”¨æ€»ç»“<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2021 - 2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">å¯å–œ</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="æŸ¥çœ‹è¯„è®º">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":100},"comment":{}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
