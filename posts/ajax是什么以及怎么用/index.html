<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>AJAXæ˜¯ä»€ä¹ˆä»¥åŠæ€ä¹ˆç”¨ - å¯å–œã®life</title><meta name="Description" content=""><meta property="og:title" content="AJAXæ˜¯ä»€ä¹ˆä»¥åŠæ€ä¹ˆç”¨" />
<meta property="og:description" content="æºç  1.æ²¡æœ‰AJAXæ—¶ï¼Œæµè§ˆå™¨å¦‚ä½•å‘èµ·è¯·æ±‚ åœ°å€æ è¾“å…¥URL DNSè§£æåŸŸå æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªHTTPè¯·æ±‚ æœåŠ¡å™¨è¿”å›ä¸€ä¸ªHTTPå“åº” æµè§ˆå™¨è§£" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://luuu4129955.github.io/posts/ajax%E6%98%AF%E4%BB%80%E4%B9%88%E4%BB%A5%E5%8F%8A%E6%80%8E%E4%B9%88%E7%94%A8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-10-05T15:29:59+08:00" />
<meta property="article:modified_time" content="2021-10-05T15:29:59+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="AJAXæ˜¯ä»€ä¹ˆä»¥åŠæ€ä¹ˆç”¨"/>
<meta name="twitter:description" content="æºç  1.æ²¡æœ‰AJAXæ—¶ï¼Œæµè§ˆå™¨å¦‚ä½•å‘èµ·è¯·æ±‚ åœ°å€æ è¾“å…¥URL DNSè§£æåŸŸå æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªHTTPè¯·æ±‚ æœåŠ¡å™¨è¿”å›ä¸€ä¸ªHTTPå“åº” æµè§ˆå™¨è§£"/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://luuu4129955.github.io/posts/ajax%E6%98%AF%E4%BB%80%E4%B9%88%E4%BB%A5%E5%8F%8A%E6%80%8E%E4%B9%88%E7%94%A8/" /><link rel="prev" href="https://luuu4129955.github.io/posts/cookie%E5%92%8Csession/" /><link rel="next" href="https://luuu4129955.github.io/posts/vue%E6%95%B0%E6%8D%AE%E5%93%8D%E5%BA%94%E5%BC%8F/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "AJAXæ˜¯ä»€ä¹ˆä»¥åŠæ€ä¹ˆç”¨",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/luuu4129955.github.io\/posts\/ajax%E6%98%AF%E4%BB%80%E4%B9%88%E4%BB%A5%E5%8F%8A%E6%80%8E%E4%B9%88%E7%94%A8\/"
        },"genre": "posts","wordcount":  2274 ,
        "url": "https:\/\/luuu4129955.github.io\/posts\/ajax%E6%98%AF%E4%BB%80%E4%B9%88%E4%BB%A5%E5%8F%8A%E6%80%8E%E4%B9%88%E7%94%A8\/","datePublished": "2021-10-05T15:29:59+08:00","dateModified": "2021-10-05T15:29:59+08:00","publisher": {
            "@type": "Organization",
            "name": "å¯å–œ"},"author": {
                "@type": "Person",
                "name": "å¯å–œ"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="å¯å–œã®life">ğŸ˜‰å¯å–œã®life</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> æ–‡ç«  </a><a class="menu-item" href="/tags/"> æ ‡ç­¾ </a><a class="menu-item" href="/categories/"> åˆ†ç±» </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="å¯å–œã®life">ğŸ˜‰å¯å–œã®life</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">æ–‡ç« </a><a class="menu-item" href="/tags/" title="">æ ‡ç­¾</a><a class="menu-item" href="/categories/" title="">åˆ†ç±»</a><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">AJAXæ˜¯ä»€ä¹ˆä»¥åŠæ€ä¹ˆç”¨</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>å¯å–œ</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-10-05">2021-10-05</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 2274 å­—&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 5 åˆ†é’Ÿ&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>ç›®å½•</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#1æ²¡æœ‰ajaxæ—¶æµè§ˆå™¨å¦‚ä½•å‘èµ·è¯·æ±‚">1.æ²¡æœ‰AJAXæ—¶ï¼Œæµè§ˆå™¨å¦‚ä½•å‘èµ·è¯·æ±‚</a></li>
    <li><a href="#2ajaxè¯ç”Ÿ">2.AJAXè¯ç”Ÿ</a></li>
    <li><a href="#3ajaxæ˜¯ä»€ä¹ˆ">3.AJAXæ˜¯ä»€ä¹ˆ</a>
      <ul>
        <li><a href="#31ä½¿ç”¨jså‘è¯·æ±‚å’Œæ”¶å“åº”">3.1ä½¿ç”¨JSå‘è¯·æ±‚å’Œæ”¶å“åº”</a></li>
        <li><a href="#32ä»£ç ç¤ºä¾‹">3.2ä»£ç ç¤ºä¾‹</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p><a href="https://github.com/luuu4129955/AJAX-demo1" target="_blank" rel="noopener noreffer">æºç </a>
<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="1æ²¡æœ‰ajaxæ—¶æµè§ˆå™¨å¦‚ä½•å‘èµ·è¯·æ±‚">1.æ²¡æœ‰AJAXæ—¶ï¼Œæµè§ˆå™¨å¦‚ä½•å‘èµ·è¯·æ±‚</h2>
<ol>
<li>åœ°å€æ è¾“å…¥URL</li>
<li>DNSè§£æåŸŸå</li>
<li>æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªHTTPè¯·æ±‚</li>
<li>æœåŠ¡å™¨è¿”å›ä¸€ä¸ªHTTPå“åº”</li>
<li>æµè§ˆå™¨è§£æHTML</li>
<li>æµè§ˆå™¨å‘é€è¯·æ±‚è·å–åµŒå…¥åœ¨ HTML ä¸­çš„èµ„æºï¼ˆå¦‚å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ã€CSSã€JSç­‰ç­‰ï¼‰<!-- raw HTML omitted --> å¦‚ï¼šç”¨æˆ·ç‚¹å‡»<code>a</code>é“¾æ¥ï¼Œæµè§ˆå™¨å‘èµ·è¯·æ±‚ï¼ˆåŒæ—¶æ•´ä¸ªé¡µé¢é‡æ–°åŠ è½½ï¼‰</li>
</ol>
<p>ç±»ä¼¼çš„è¿˜æœ‰<code>img</code>æ ‡ç­¾ã€<code>link</code>æ ‡ç­¾ã€<code>script</code>æ ‡ç­¾ã€‚
<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="2ajaxè¯ç”Ÿ">2.AJAXè¯ç”Ÿ</h2>
<ul>
<li>å‰è¨€<a href="https://www.yuque.com/u22007396/ghlhwy/ypgcna" target="_blank" rel="noopener noreffer">JavaScriptè¯ç”Ÿè®°</a></li>
<li>ç¬¬ä¸€ä¸ªè‘—åçš„AJAXåº”ç”¨â€”â€”Gmailï¼ˆGmailä¸æ˜¯ç¬¬ä¸€ä¸ªAjaxçš„ç½‘é¡µï¼Œä½†å´æ˜¯ç¬¬ä¸€ä¸ªè¯æ˜å¯ä»¥å¤§è§„æ¨¡åº”ç”¨çš„ç½‘é¡µã€‚ï¼‰</li>
<li>Gmailï¼šç”¨æˆ·å¯ä»¥åœ¨ä¸€ä¸ªé¡µé¢é‡Œå®Œæˆæ”¶å‘é‚®ä»¶ã€è®¾ç½®è¿‡æ»¤è§„åˆ™ç­‰å¤æ‚çš„åŠŸèƒ½ã€‚</li>
<li>åœ¨ç”¨æˆ·ä½“éªŒä¸Šï¼Œä½¿ç½‘é¡µç•Œé¢æ›´æ¥è¿‘äºæ¡Œé¢åº”ç”¨</li>
<li><strong>Refresh without Reload</strong></li>
<li>ä»æ­¤ï¼Œå‰åç«¯åˆ†ç¦»
<!-- raw HTML omitted --><!-- raw HTML omitted --></li>
</ul>
<h2 id="3ajaxæ˜¯ä»€ä¹ˆ">3.AJAXæ˜¯ä»€ä¹ˆ</h2>
<p>2005å¹´2æœˆï¼ŒAJAX è¿™ä¸ªè¯ç¬¬ä¸€æ¬¡æ­£å¼æå‡ºï¼Œå®ƒæ˜¯ Asynchronous JavaScript and XML çš„ç¼©å†™ï¼ŒæŒ‡çš„æ˜¯é€šè¿‡ JavaScript çš„å¼‚æ­¥é€šä¿¡ï¼Œä»æœåŠ¡å™¨è·å– XML æ–‡æ¡£ä»ä¸­æå–æ•°æ®ï¼Œå†æ›´æ–°å½“å‰ç½‘é¡µçš„å¯¹åº”éƒ¨åˆ†ï¼Œè€Œä¸ç”¨åˆ·æ–°æ•´ä¸ªç½‘é¡µã€‚åæ¥ï¼ŒAJAX è¿™ä¸ªè¯å°±æˆä¸º JavaScript è„šæœ¬å‘èµ· HTTP é€šä¿¡çš„ä»£åè¯ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ç”¨è„šæœ¬å‘èµ·é€šä¿¡ï¼Œå°±å¯ä»¥å«åš AJAX é€šä¿¡ã€‚W3C ä¹Ÿåœ¨2006å¹´å‘å¸ƒäº†å®ƒçš„å›½é™…æ ‡å‡†ã€‚
<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="31ä½¿ç”¨jså‘è¯·æ±‚å’Œæ”¶å“åº”">3.1ä½¿ç”¨JSå‘è¯·æ±‚å’Œæ”¶å“åº”</h3>
<p>â€‹<!-- raw HTML omitted --></p>
<ul>
<li>æµè§ˆå™¨åœ¨windowä¸Šæ·»åŠ äº†ä¸€ä¸ª<code>XMLHttpRequest()</code>å‡½æ•°ï¼ˆå…¨å±€å‡½æ•°ï¼‰</li>
<li>ç”¨è¿™ä¸ªæ„é€ å‡½æ•°ï¼ˆç±»ï¼‰æ„é€ ä¸€ä¸ªå¯¹è±¡</li>
<li>JSç”¨è¿™ä¸ªå¯¹è±¡å‘æœåŠ¡å™¨å‘å‡ºHTTPè¯·æ±‚</li>
<li>æ¥æ”¶æœåŠ¡å™¨ä¼ å›çš„æ•°æ®</li>
<li>æ›´æ–°ç½‘é¡µæ•°æ®
<!-- raw HTML omitted --><!-- raw HTML omitted --></li>
</ul>
<h3 id="32ä»£ç ç¤ºä¾‹">3.2ä»£ç ç¤ºä¾‹</h3>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://cdn.nlark.com/yuque/0/2021/png/22429169/1633239283964-caaa98d3-33ec-4b54-8a87-a15368e5882a.png#clientId=u861c0100-b5e6-4&amp;from=paste&amp;height=470&amp;id=uf7120482&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=426&amp;originWidth=209&amp;originalType=binary&amp;ratio=1&amp;size=14531&amp;status=done&amp;style=shadow&amp;taskId=u1d5c2c29-cbe3-4432-a896-b53c5f3d47b&amp;width=230.5"
        data-srcset="https://cdn.nlark.com/yuque/0/2021/png/22429169/1633239283964-caaa98d3-33ec-4b54-8a87-a15368e5882a.png#clientId=u861c0100-b5e6-4&amp;from=paste&amp;height=470&amp;id=uf7120482&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=426&amp;originWidth=209&amp;originalType=binary&amp;ratio=1&amp;size=14531&amp;status=done&amp;style=shadow&amp;taskId=u1d5c2c29-cbe3-4432-a896-b53c5f3d47b&amp;width=230.5, https://cdn.nlark.com/yuque/0/2021/png/22429169/1633239283964-caaa98d3-33ec-4b54-8a87-a15368e5882a.png#clientId=u861c0100-b5e6-4&amp;from=paste&amp;height=470&amp;id=uf7120482&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=426&amp;originWidth=209&amp;originalType=binary&amp;ratio=1&amp;size=14531&amp;status=done&amp;style=shadow&amp;taskId=u1d5c2c29-cbe3-4432-a896-b53c5f3d47b&amp;width=230.5 1.5x, https://cdn.nlark.com/yuque/0/2021/png/22429169/1633239283964-caaa98d3-33ec-4b54-8a87-a15368e5882a.png#clientId=u861c0100-b5e6-4&amp;from=paste&amp;height=470&amp;id=uf7120482&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=426&amp;originWidth=209&amp;originalType=binary&amp;ratio=1&amp;size=14531&amp;status=done&amp;style=shadow&amp;taskId=u1d5c2c29-cbe3-4432-a896-b53c5f3d47b&amp;width=230.5 2x"
        data-sizes="auto"
        alt="https://cdn.nlark.com/yuque/0/2021/png/22429169/1633239283964-caaa98d3-33ec-4b54-8a87-a15368e5882a.png#clientId=u861c0100-b5e6-4&amp;from=paste&amp;height=470&amp;id=uf7120482&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=426&amp;originWidth=209&amp;originalType=binary&amp;ratio=1&amp;size=14531&amp;status=done&amp;style=shadow&amp;taskId=u1d5c2c29-cbe3-4432-a896-b53c5f3d47b&amp;width=230.5"
        title="image.png" />
<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h4 id="serverjsä½œä¸ºæœåŠ¡å™¨">â‘ server.jsä½œä¸ºæœåŠ¡å™¨</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;http&#34;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;fs&#34;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;url&#34;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">port</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;è¯·æŒ‡å®šç«¯å£å·å¥½ä¸å•¦ï¼Ÿ\nnode server.js 8888 è¿™æ ·ä¸ä¼šå—ï¼Ÿ&#34;</span><span class="p">);</span>
  <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">parsedUrl</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">pathWithQuery</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">url</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">queryString</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">pathWithQuery</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&#34;?&#34;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">queryString</span> <span class="o">=</span> <span class="nx">pathWithQuery</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">pathWithQuery</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&#34;?&#34;</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">parsedUrl</span><span class="p">.</span><span class="nx">pathname</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="nx">parsedUrl</span><span class="p">.</span><span class="nx">query</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">method</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">method</span><span class="p">;</span>

  <span class="cm">/******** ä»è¿™é‡Œå¼€å§‹çœ‹ï¼Œä¸Šé¢ä¸è¦çœ‹ ************/</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;æœ‰ä¸ªå‚»å­å‘è¯·æ±‚è¿‡æ¥å•¦ï¼è·¯å¾„ï¼ˆå¸¦æŸ¥è¯¢å‚æ•°ï¼‰ä¸ºï¼š&#34;</span> <span class="o">+</span> <span class="nx">pathWithQuery</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">path</span> <span class="o">===</span> <span class="s2">&#34;/index.html&#34;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="s2">&#34;Content-Type&#34;</span><span class="p">,</span> <span class="s2">&#34;text/html;charset=utf-8&#34;</span><span class="p">);</span>
    <span class="kd">let</span> <span class="nx">string</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s2">&#34;public/index.html&#34;</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>
    <span class="kr">const</span> <span class="nx">page1</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s2">&#34;db/page1.json&#34;</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>
    <span class="kr">const</span> <span class="nx">array</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">page1</span><span class="p">);</span>
    <span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="sb">`&lt;li&gt;</span><span class="si">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">&lt;/li&gt;`</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&#34;&#34;</span><span class="p">);</span>

    <span class="nx">string</span> <span class="o">=</span> <span class="nx">string</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&#34;{{page1}}&#34;</span><span class="p">,</span> <span class="sb">`&lt;ul id=&#39;xxx&#39;&gt;</span><span class="si">${</span><span class="nx">result</span><span class="si">}</span><span class="sb">&lt;/ul&gt;`</span><span class="p">);</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">string</span><span class="p">);</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">path</span> <span class="o">===</span> <span class="s2">&#34;/main.js&#34;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="s2">&#34;Content-Type&#34;</span><span class="p">,</span> <span class="s2">&#34;text/javascript;charset=utf-8&#34;</span><span class="p">);</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s2">&#34;public/main.js&#34;</span><span class="p">));</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">path</span> <span class="o">===</span> <span class="s2">&#34;/style.css&#34;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="s2">&#34;Content-Type&#34;</span><span class="p">,</span> <span class="s2">&#34;text/css;charset=utf-8&#34;</span><span class="p">);</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s2">&#34;public/style.css&#34;</span><span class="p">));</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">path</span> <span class="o">===</span> <span class="s2">&#34;/2.js&#34;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="s2">&#34;Content-Type&#34;</span><span class="p">,</span> <span class="s2">&#34;text/javascript;charset=utf-8&#34;</span><span class="p">);</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s2">&#34;public/2.js&#34;</span><span class="p">));</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">path</span> <span class="o">===</span> <span class="s2">&#34;/3.html&#34;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="s2">&#34;Content-Type&#34;</span><span class="p">,</span> <span class="s2">&#34;text/html;charset=utf-8&#34;</span><span class="p">);</span>
    <span class="kr">const</span> <span class="nx">string</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s2">&#34;public/3.html&#34;</span><span class="p">);</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">string</span><span class="p">);</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">path</span> <span class="o">===</span> <span class="s2">&#34;/4.xml&#34;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="s2">&#34;Content-Type&#34;</span><span class="p">,</span> <span class="s2">&#34;text/xml;charset=utf-8&#34;</span><span class="p">);</span>
    <span class="kr">const</span> <span class="nx">string</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s2">&#34;public/4.xml&#34;</span><span class="p">);</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">string</span><span class="p">);</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">path</span> <span class="o">===</span> <span class="s2">&#34;/5.json&#34;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="s2">&#34;Content-Type&#34;</span><span class="p">,</span> <span class="s2">&#34;text/json;charset=utf-8&#34;</span><span class="p">);</span>
    <span class="kr">const</span> <span class="nx">string</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s2">&#34;public/5.json&#34;</span><span class="p">);</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">string</span><span class="p">);</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">path</span> <span class="o">===</span> <span class="s2">&#34;/page2&#34;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="s2">&#34;Content-Type&#34;</span><span class="p">,</span> <span class="s2">&#34;text/json;charset=utf-8&#34;</span><span class="p">);</span>
    <span class="kr">const</span> <span class="nx">string</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s2">&#34;db/page2.json&#34;</span><span class="p">);</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">string</span><span class="p">);</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">path</span> <span class="o">===</span> <span class="s2">&#34;/page3&#34;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="s2">&#34;Content-Type&#34;</span><span class="p">,</span> <span class="s2">&#34;text/json;charset=utf-8&#34;</span><span class="p">);</span>
    <span class="kr">const</span> <span class="nx">string</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s2">&#34;db/page3.json&#34;</span><span class="p">);</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">string</span><span class="p">);</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">404</span><span class="p">;</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="s2">&#34;Content-Type&#34;</span><span class="p">,</span> <span class="s2">&#34;text/html;charset=utf-8&#34;</span><span class="p">);</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="sb">`ä½ è¾“å…¥çš„è·¯å¾„ä¸å­˜åœ¨å¯¹åº”çš„å†…å®¹`</span><span class="p">);</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="cm">/******** ä»£ç ç»“æŸï¼Œä¸‹é¢ä¸è¦çœ‹ ************/</span>
<span class="p">});</span>

<span class="nx">server</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
  <span class="s2">&#34;ç›‘å¬ &#34;</span> <span class="o">+</span>
    <span class="nx">port</span> <span class="o">+</span>
    <span class="s2">&#34; æˆåŠŸ\nè¯·ç”¨åœ¨ç©ºä¸­è½¬ä½“720åº¦ç„¶åç”¨ç”µé¥­ç…²æ‰“å¼€ http://localhost:&#34;</span> <span class="o">+</span>
    <span class="nx">port</span>
<span class="p">);</span>

</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h4 id="æ·»åŠ indexhtmlmainjsä¸¤ä¸ªè·¯ç”±">â‘¡æ·»åŠ index.html/main.jsä¸¤ä¸ªè·¯ç”±</h4>
<p><code>index.html</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>ajax<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="c">&lt;!-- &lt;link rel=&#34;stylesheet&#34; href=&#34;style.css&#34; /&gt; --&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>AJAX <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;myName&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;getCSS&#34;</span><span class="p">&gt;</span>è¯·æ±‚ css<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;getJS&#34;</span><span class="p">&gt;</span>è¯·æ±‚ js<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;getHTML&#34;</span><span class="p">&gt;</span>è¯·æ±‚ html<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;getXML&#34;</span><span class="p">&gt;</span>è¯·æ±‚ xml<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;getJSON&#34;</span><span class="p">&gt;</span>è¯·æ±‚ json<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;getPage&#34;</span><span class="p">&gt;</span>è¯·æ±‚ ä¸‹ä¸€é¡µ<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>{{page1}}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;/main.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>

</code></pre></div><p><code>main.js</code><!-- raw HTML omitted -->XMLHttpRequestå¯¹è±¡æ˜¯ AJAX çš„ä¸»è¦æ¥å£ï¼Œç”¨äºæµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ã€‚å°½ç®¡åå­—é‡Œé¢æœ‰XMLå’ŒHttpï¼Œå®ƒå®é™…ä¸Šå¯ä»¥ä½¿ç”¨å¤šç§åè®®ï¼ˆæ¯”å¦‚fileæˆ–ftpï¼‰ï¼Œå‘é€ä»»ä½•æ ¼å¼çš„æ•°æ®ï¼ˆåŒ…æ‹¬å­—ç¬¦ä¸²å’ŒäºŒè¿›åˆ¶ï¼‰ã€‚
<!-- raw HTML omitted --></p>
<ol>
<li>XMLHttpRequestæœ¬èº«æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨newå‘½ä»¤ç”Ÿæˆå®ä¾‹ã€‚å®ƒæ²¡æœ‰ä»»ä½•å‚æ•°ã€‚</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript">  <span class="kr">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span><span class="c1">//åˆ›å»ºä¸€ä¸ªrequestå¯¹è±¡
</span></code></pre></div><ol start="2">
<li>ä¸€æ—¦æ–°å»ºå®ä¾‹ï¼Œå°±å¯ä»¥ä½¿ç”¨open()æ–¹æ³•å‘å‡º HTTP è¯·æ±‚ã€‚
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>open()</td>
<td>è§„å®šè¯·æ±‚çš„ç±»å‹ã€URL ä»¥åŠæ˜¯å¦å¼‚æ­¥å¤„ç†è¯·æ±‚ã€‚<!-- raw HTML omitted -->methodï¼šè¯·æ±‚çš„ç±»å‹ï¼›GET æˆ– POST<!-- raw HTML omitted -->urlï¼šæ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šçš„ä½ç½®<!-- raw HTML omitted -->asyncï¼štrueï¼ˆå¼‚æ­¥ï¼‰æˆ– falseï¼ˆåŒæ­¥ï¼‰</td>
</tr>
</tbody>
</table>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">request</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&#34;GET&#34;</span><span class="p">,</span> <span class="s2">&#34;/3.html&#34;</span><span class="p">);</span><span class="c1">//å‘æŒ‡å®šåœ°å€ï¼Œå‘å‡ºgetè¯·æ±‚
</span><span class="c1"></span><span class="nx">request</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&#34;GET&#34;</span><span class="p">,</span> <span class="s2">&#34;/3.html&#34;</span><span class="p">,</span><span class="kc">true</span><span class="p">);</span><span class="c1">//tureè¡¨ç¤ºåŒæ­¥ï¼Œfalseè¡¨ç¤ºå¼‚æ­¥ã€‚ä¸€èˆ¬è¿™é‡Œä¸å†™
</span></code></pre></div><ol start="3">
<li>æŒ‡å®šå›è°ƒå‡½æ•°ï¼Œç›‘å¬é€šä¿¡çŠ¶æ€ï¼ˆreadyStateå±æ€§ï¼‰çš„å˜åŒ–ã€‚</li>
</ol>
<p>AJXAå“åº”æœåŠ¡å™¨ï¼š</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>responseText</td>
<td>è·å¾—å­—ç¬¦ä¸²å½¢å¼çš„å“åº”æ•°æ®ã€‚</td>
</tr>
<tr>
<td>responseXML</td>
<td>è·å¾— XML å½¢å¼çš„å“åº”æ•°æ®ã€‚</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">request</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span> <span class="o">&amp;&amp;</span> <span class="nx">request</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">response</span><span class="p">);</span>
      <span class="kr">const</span> <span class="nx">object</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">response</span><span class="p">);</span>
      <span class="nx">myName</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">object</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
</code></pre></div><ol start="4">
<li>è°ƒç”¨å¯¹è±¡çš„<code>send()</code>æ–¹æ³•ï¼Œå‘é€è¯·æ±‚</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">request</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
</code></pre></div><p>æ³¨æ„ï¼Œæ‰€æœ‰ <code>XMLHttpRequest</code>çš„ç›‘å¬äº‹ä»¶ï¼Œéƒ½å¿…é¡»åœ¨<code>send()</code>æ–¹æ³•è°ƒç”¨ä¹‹å‰è®¾å®šã€‚
<!-- raw HTML omitted --><code>send()</code>æ–¹æ³•çš„å‚æ•°å°±æ˜¯å‘é€çš„æ•°æ®ã€‚å¤šç§æ ¼å¼çš„æ•°æ®ï¼Œéƒ½å¯ä»¥ä½œä¸ºå®ƒçš„å‚æ•°ã€‚<!-- raw HTML omitted -->
<!-- raw HTML omitted -->å®Œæ•´ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">n</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nx">getPage</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
  <span class="nx">request</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&#34;GET&#34;</span><span class="p">,</span> <span class="sb">`/page</span><span class="si">${</span><span class="nx">n</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
  <span class="nx">request</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span> <span class="o">&amp;&amp;</span> <span class="nx">request</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">array</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">response</span><span class="p">);</span>
      <span class="nx">array</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">li</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&#34;li&#34;</span><span class="p">);</span>
        <span class="nx">li</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
        <span class="nx">xxx</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">li</span><span class="p">);</span>
      <span class="p">});</span>
      <span class="nx">n</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="nx">request</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">getJSON</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
  <span class="nx">request</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&#34;GET&#34;</span><span class="p">,</span> <span class="s2">&#34;/5.json&#34;</span><span class="p">);</span>
  <span class="nx">request</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span> <span class="o">&amp;&amp;</span> <span class="nx">request</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">response</span><span class="p">);</span>
      <span class="kr">const</span> <span class="nx">object</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">response</span><span class="p">);</span>
      <span class="nx">myName</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">object</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="nx">request</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">getXML</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
  <span class="nx">request</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&#34;GET&#34;</span><span class="p">,</span> <span class="s2">&#34;/4.xml&#34;</span><span class="p">);</span>
  <span class="nx">request</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span> <span class="o">&amp;&amp;</span> <span class="nx">request</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">dom</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">responseXML</span><span class="p">;</span><span class="c1">//å¤„ç†responseXML
</span><span class="c1"></span>      <span class="kr">const</span> <span class="nx">text</span> <span class="o">=</span> <span class="nx">dom</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&#34;warning&#34;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">textContent</span><span class="p">;</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">trim</span><span class="p">());</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="nx">request</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">getHTML</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
  <span class="nx">request</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&#34;GET&#34;</span><span class="p">,</span> <span class="s2">&#34;/3.html&#34;</span><span class="p">);</span>
  <span class="nx">request</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="c1">// åˆ›å»ºdivæ ‡ç­¾
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&#34;div&#34;</span><span class="p">);</span>
    <span class="c1">// å†™divå†…å®¹
</span><span class="c1"></span>    <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">response</span><span class="p">;</span>
    <span class="c1">// æ’å…¥åˆ°body
</span><span class="c1"></span>    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">div</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">request</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{};</span>
  <span class="nx">request</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">getJS</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
  <span class="nx">request</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&#34;GET&#34;</span><span class="p">,</span> <span class="s2">&#34;/2.js&#34;</span><span class="p">);</span>
  <span class="nx">request</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="c1">// åˆ›å»ºscripæ ‡ç­¾
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">script</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&#34;script&#34;</span><span class="p">);</span>
    <span class="c1">// å†™scriptå†…å®¹
</span><span class="c1"></span>    <span class="nx">script</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">response</span><span class="p">;</span>
    <span class="c1">// æ’å…¥åˆ°bodyé‡Œ
</span><span class="c1"></span>    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">script</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">request</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{};</span>
  <span class="nx">request</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">getCSS</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
  <span class="nx">request</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&#34;GET&#34;</span><span class="p">,</span> <span class="s2">&#34;/style.css&#34;</span><span class="p">);</span> <span class="c1">//readyStare=1
</span><span class="c1"></span>  <span class="c1">//   ä¸‹è½½æˆåŠŸï¼Œä½†ä¸çŸ¥é“æ˜¯æˆåŠŸ2xxè¿˜æ˜¯å¤±è´¥4xx,5xx
</span><span class="c1"></span>  <span class="nx">request</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="nx">request</span><span class="p">.</span><span class="nx">status</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// åˆ›å»ºstyleæ ‡ç­¾
</span><span class="c1"></span>        <span class="kr">const</span> <span class="nx">style</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&#34;style&#34;</span><span class="p">);</span>
        <span class="c1">// å¡«å†™styleå†…å®¹
</span><span class="c1"></span>        <span class="nx">style</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">response</span><span class="p">;</span>
        <span class="c1">// æ’åˆ°headé‡Œé¢
</span><span class="c1"></span>        <span class="nb">document</span><span class="p">.</span><span class="nx">head</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">style</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="s2">&#34;åŠ è½½CSSå¤±è´¥&#34;</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="nx">request</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span> <span class="c1">//readyStare=2
</span><span class="c1"></span><span class="p">};</span>

</code></pre></div></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>æ›´æ–°äº 2021-10-05</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">è¿”å›</a></span>&nbsp;|&nbsp;<span><a href="/">ä¸»é¡µ</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/cookie%E5%92%8Csession/" class="prev" rel="prev" title="ä¸ºä»€ä¹ˆä¼šæœ‰Cookieå’ŒSession"><i class="fas fa-angle-left fa-fw"></i>ä¸ºä»€ä¹ˆä¼šæœ‰Cookieå’ŒSession</a>
            <a href="/posts/vue%E6%95%B0%E6%8D%AE%E5%93%8D%E5%BA%94%E5%BC%8F/" class="next" rel="next" title="Vueæ•°æ®å“åº”å¼">Vueæ•°æ®å“åº”å¼<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2021 - 2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">å¯å–œ</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="æŸ¥çœ‹è¯„è®º">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":100},"comment":{}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
